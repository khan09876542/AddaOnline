

CREATE TABLE schedules (
    id INT AUTO_INCREMENT PRIMARY KEY,
    bus_id INT NOT NULL,
    departure_time TIME NOT NULL,
    arrival_time TIME NOT NULL,
    status ENUM('active','cancelled') DEFAULT 'active',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,

    CONSTRAINT fk_bus
    FOREIGN KEY (bus_id) REFERENCES buses(id)
    ON DELETE CASCADE
    ON UPDATE CASCADE
);

CREATE TABLE users(
id int aut_incement primary key,
name varchar(50),
email varchar(50),
password varchar(30),
phone varchar(25),
created_at timestamp default current_timestamp
)engine = innoDb default charset utf8mb4;



create table seats(
    seat_id int auto_increment primary key,
    bus_id int,
    seat_number varchar(20)
)engine = innodB default charset utf8mb4;


create table bookings(
booking_id int auto_increment primary key,
user_id int,
shedule_id int,
booking_date datetime default current_timestamp,
status ENUM('pending','confirmed','cancelled') DEFAULT 'pending',


foreign_key (user_id) references users(id)
foreign_key (shedule_id) refrences bus_shedule(id)
)engine = innodB default charset utf8mb4;


create table booking_seats(
booking_id int,
seat_id int,

primary key(booking_id , seat_id),

foreign key(booking_id) references bookings(booking_id),
foreign key(seat_id) references seats(seat_id),

)engine = innoDB default charset utf8mb4;